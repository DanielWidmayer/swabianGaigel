<div id="chatfield" style="border: 2px solid black; border-radius: 3px; background-color: royalblue; box-sizing: border-box; height: 330px; overflow: auto;">
    
</div>
<input type="text" id="fpost" style="width: 90%; height: 20px;"></input><button type="button" id="bpost">></button>

<script>
    const chf = $('#chatfield');
    const fpost = $('#fpost');
    const bpost = $('#bpost');

    io.socket.on('joinmsg', function(data) {
        console.log("joined");
        chf.append(`<p style="font-weigth: bold;">${data.user} ${data.text}</p>`);
    })

    io.socket.on('leavemsg', function(data) {
        console.log("left");
        chf.append(`<p style="font-weigth: bold;">${data.user} ${data.text}</p>`);
    })

    io.socket.on('chatmsg', function(data) {
        chf.append(`<p>${data.user}: ${data.text}</p>`);
    })

    bpost.click(postmsg);

    fpost.keypress(function (e) {
        var keycode = (e.keyCode ? e.keyCode : e.which);
        if (keycode == '13') postmsg();
    });

    function postmsg() {
        if (fpost.val().length > 0) {
            console.log("posting");
            io.socket.post('/chatpost', {text: fpost.val()}, function(res, jres) {
                if(jres.statusCode != 200) {
                    console.log(jres);
                    console.log(res);
                } else {
                    console.log(res);
                }
            })
        }
    }

</script>